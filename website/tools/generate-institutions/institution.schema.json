{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://identitate.ro/schemas/institution-v3.json",
  "title": "IdentitateRO Institution v3",
  "description": "Schema for a Romanian public institution visual identity record (v3.0)",
  "type": "object",
  "required": ["id", "slug", "name", "category", "meta", "assets"],
  "additionalProperties": false,
  "properties": {
    "id": {
      "type": "string",
      "pattern": "^ro-[a-z0-9-]+$",
      "description": "Unique ID in format ro-{slug}"
    },
    "slug": {
      "type": "string",
      "pattern": "^[a-z0-9-]+$",
      "description": "URL-safe slug (lowercase, no diacritics, hyphens)"
    },
    "name": {
      "type": "string",
      "minLength": 2,
      "description": "Full official name of the institution"
    },
    "shortname": {
      "type": ["string", "null"],
      "description": "Short name or acronym (lowercase)"
    },
    "category": {
      "type": "string",
      "enum": [
        "guvern", "minister", "primarie", "consiliu-judetean",
        "prefectura", "agentie", "autoritate", "proiect-ue",
        "institutie-cultura", "altele"
      ]
    },
    "meta": {
      "type": "object",
      "required": ["version", "last_updated", "keywords"],
      "additionalProperties": false,
      "properties": {
        "version": { "type": "string" },
        "last_updated": {
          "type": "string",
          "pattern": "^\\d{4}-\\d{2}-\\d{2}$",
          "description": "ISO 8601 date (YYYY-MM-DD)"
        },
        "keywords": {
          "type": "array",
          "items": { "type": "string" },
          "minItems": 1
        },
        "quality": {
          "type": ["string", "null"],
          "enum": ["verified", "community", "draft", null]
        }
      }
    },
    "location": {
      "type": ["object", "null"],
      "additionalProperties": false,
      "properties": {
        "country_code": { "type": "string", "pattern": "^[A-Z]{2}$" },
        "county": { "type": ["string", "null"] },
        "city": { "type": ["string", "null"] }
      }
    },
    "description": {
      "type": ["string", "null"],
      "description": "Brief description of the institution"
    },
    "usage_notes": {
      "type": ["string", "null"],
      "description": "Usage restrictions or notes"
    },
    "colors": {
      "type": ["array", "null"],
      "items": {
        "type": "object",
        "required": ["name", "hex"],
        "additionalProperties": false,
        "properties": {
          "name": { "type": "string" },
          "hex": { "type": "string", "pattern": "^#[0-9A-Fa-f]{6}$" },
          "rgb": {
            "type": ["array", "null"],
            "items": { "type": "integer", "minimum": 0, "maximum": 255 },
            "minItems": 3,
            "maxItems": 3
          },
          "cmyk": {
            "type": ["array", "null"],
            "items": { "type": "number", "minimum": 0, "maximum": 100 },
            "minItems": 4,
            "maxItems": 4
          },
          "pantone": { "type": ["string", "null"] },
          "usage": {
            "type": ["string", "null"],
            "enum": ["primary", "secondary", "accent", "neutral", null]
          }
        }
      }
    },
    "typography": {
      "type": ["object", "null"],
      "additionalProperties": false,
      "properties": {
        "primary": {
          "type": ["object", "null"],
          "additionalProperties": false,
          "properties": {
            "family": { "type": "string" },
            "url": { "type": ["string", "null"] },
            "weights": {
              "type": ["array", "null"],
              "items": { "type": "integer" }
            }
          }
        },
        "secondary": {
          "type": ["object", "null"],
          "additionalProperties": false,
          "properties": {
            "family": { "type": "string" },
            "url": { "type": ["string", "null"] },
            "weights": {
              "type": ["array", "null"],
              "items": { "type": "integer" }
            }
          }
        }
      }
    },
    "assets": {
      "type": "object",
      "required": ["main"],
      "additionalProperties": false,
      "properties": {
        "main": { "$ref": "#/$defs/logoAssetGroup" },
        "horizontal": { "$ref": "#/$defs/logoAssetGroupOrNull" },
        "vertical": { "$ref": "#/$defs/logoAssetGroupOrNull" },
        "symbol": { "$ref": "#/$defs/logoAssetGroupOrNull" },
        "favicon": { "type": ["string", "null"] }
      }
    },
    "resources": {
      "type": ["object", "null"],
      "additionalProperties": false,
      "properties": {
        "website": { "type": ["string", "null"] },
        "branding_manual": { "type": ["string", "null"] },
        "social_media": {
          "type": ["object", "null"],
          "additionalProperties": false,
          "properties": {
            "facebook": { "type": ["string", "null"] },
            "twitter": { "type": ["string", "null"] },
            "linkedin": { "type": ["string", "null"] },
            "instagram": { "type": ["string", "null"] }
          }
        }
      }
    }
  },
  "$defs": {
    "assetPath": {
      "description": "A relative asset path string like /logos/slug/file.svg",
      "type": ["string", "null"]
    },
    "pngAsset": {
      "type": ["object", "null"],
      "additionalProperties": false,
      "properties": {
        "path": { "type": "string" },
        "width": { "type": "integer", "minimum": 1 },
        "height": { "type": "integer", "minimum": 1 }
      },
      "required": ["path", "width", "height"]
    },
    "logoAssetGroup": {
      "type": "object",
      "required": ["type"],
      "additionalProperties": false,
      "properties": {
        "type": { "type": "string", "enum": ["horizontal", "vertical", "symbol"] },
        "color": { "$ref": "#/$defs/assetPath" },
        "dark_mode": { "$ref": "#/$defs/assetPath" },
        "white": { "$ref": "#/$defs/assetPath" },
        "black": { "$ref": "#/$defs/assetPath" },
        "monochrome": { "$ref": "#/$defs/assetPath" },
        "png": { "$ref": "#/$defs/pngAsset" }
      }
    },
    "logoAssetGroupOrNull": {
      "oneOf": [
        { "$ref": "#/$defs/logoAssetGroup" },
        { "type": "null" }
      ]
    }
  }
}
